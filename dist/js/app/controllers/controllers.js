/*
 package 2019-02-19 
*/

open.controller("TypeaheadCtrl",function(s,t,o){s.selected=void 0,s.selectedIndex=-1,s.searchMagiKey=[],s.searchSuggestionsText=[],console.log("C [[ selected: "+s.selected+" ]]"),s.onTheChange=function(e,r,a){},s.search=function(e){console.log("C [[ searching: "+e+" ]]"),s.executeSearch(e,null),ai(e)},s.keyUp=function(e,r,a){a?""===a?$("#closeIcon").hide():$("#closeIcon").show():$("#closeIcon").hide(),40===e.keyCode?(e.preventDefault(),s.selectedIndex+=1):38===e.keyCode?s.selectedIndex-=1:e.keyCode,s.propInfoVisNew(0)},s.onSelect=function(e,r,a){s.getMagi(r),console.log("(1) EXECUTED A MAGIC KEY GRAB ON SEARCHTERM: "+r)},s.$watch("suggestionsObj",function(e,r){console.log("C [[ suggestions height: "+$("#tester ul").height()+" ]]")}),s.getLocation=function(e){var r=servicePrefix+"arcgis/rest/services/Locators/Clark_County_Composite_All/GeocodeServer/suggest?";return t.jsonp(r+"text="+e+"&maxSuggestions=null&category=null&countryCode=null&searchExtent=null&location=null&distance=null&f=json&callback=JSON_CALLBACK").then(function(e){autocompleteDirty=!0;var r=e.data.suggestions,a=[];return setTimeout(function(){$.each(r,function(e,r){a.push(r.text)}),s.searchSuggestionsText=o(a,5),s.$digest()},250),o(s.searchSuggestionsText,5)})},s.getMagi=function(a){var e=servicePrefix+"arcgis/rest/services/Locators/Clark_County_Composite_All/GeocodeServer/suggest?";t.jsonp(e+"text="+a+"&maxSuggestions=null&category=null&countryCode=null&searchExtent=null&location=null&distance=null&f=json&callback=JSON_CALLBACK").then(function(e){console.log("(2) INITIATING A GETMAGI REQUEST ON: "+a);var r=e.data.suggestions[0].magicKey;s.executeSearch(a,r)})}}),open.controller("mapController",["$scope","$filter","$http","openFactory",function(I,n,l,p){var t,c,s,y,m,g,v;function S(e){var r,a,s;I.saveView(),freshView=JSON.stringify(e.vname),console.log("HERE IS THE NAME OF THE VIEW THAT WAS JUST PASSED IN"+freshView),freshView=freshView.toLowerCase(),freshView=freshView.replace(/['"]+/g,""),console.log("formatted as: "+freshView);var t=map.getLayer("basemap"),o=map.getLayer("basemap"),i=map.getLayer("PLULayer"),n=map.getLayer("CCZoningLayer"),c=map.getLayer("C50Layer"),l=map.getLayer("C2003Layer"),p=map.getLayer("C1996Layer"),y=map.getLayer("hendersonZoningLayer"),m=map.getLayer("lasVegasZoningLayer"),g=map.getLayer("mesquiteZoningLayer"),v=map.getLayer("nlvZoningLayer"),S=map.getLayer("seismicLayer"),d=map.getLayer("SoilLayer"),L=map.getLayer("rightofwayLayer"),u=map.getLayer("abLayer");map.removeLayer(o),i&&map.removeLayer(i),n&&map.removeLayer(n),c&&map.removeLayer(c),l&&map.removeLayer(l),p&&map.removeLayer(p),y&&map.removeLayer(y),m&&map.removeLayer(m),g&&map.removeLayer(g),v&&map.removeLayer(v),S&&map.removeLayer(S),d&&map.removeLayer(d),L&&map.removeLayer(L),u&&map.removeLayer(u);var h=new esri.layers.ArcGISDynamicMapServiceLayer("https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/AssessorAnno/MapServer",{id:"assessorannoServiceLayer"}),f=new esri.layers.ArcGISDynamicMapServiceLayer("https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/AB142/MapServer",{id:"abLayer"});switch(freshView){case"aerial imagery only":map.removeAllLayers(),r="http://maps.clarkcountynv.gov/arcgis_images/rest/services/CACHED/mostcurrentflight/MapServer";var w=new esri.layers.ArcGISTiledMapServiceLayer(r,{id:"basemap"});map.addLayers([w,f]);break;case"assessor map":map.removeAllLayers(),r="http://maps.clarkcountynv.gov/arcgis_images/rest/services/CACHED/mostcurrentflight/MapServer",a="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/AssessorMap/MapServer",s="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/scl/MapServer";w=new esri.layers.ArcGISTiledMapServiceLayer(r,{id:"basemap"});assessorServiceLayer=new esri.layers.ArcGISDynamicMapServiceLayer(a,{id:"assessorServiceLayer"}),transportationServiceLayer=new esri.layers.ArcGISDynamicMapServiceLayer(s,{id:"transportationServiceLayer"}),map.addLayers([w,assessorServiceLayer,h,transportationServiceLayer,f]);break;case"boulder city zoning":require(["esri/layers/ArcGISDynamicMapServiceLayer","esri/layers/ImageParameters"],function(e,r){var a=new r;a.layerIds=[6],a.layerOption=r.LAYER_OPTION_SHOW,map.removeAllLayers(),primaryLayer="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/Zoning/MapServer",secondaryLayer="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/AssessorMap/MapServer",tertiaryLayer="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/scl/MapServer";var s=new esri.layers.ArcGISTiledMapServiceLayer(t.url,{id:"basemap"});assessorServiceLayer=new esri.layers.ArcGISDynamicMapServiceLayer(secondaryLayer,{id:"assessorServiceLayer"}),transportationServiceLayer=new esri.layers.ArcGISDynamicMapServiceLayer(tertiaryLayer,{id:"transportationServiceLayer"}),bcLayer=new esri.layers.ArcGISDynamicMapServiceLayer(primaryLayer,{id:"bcLayer",opacity:.7,imageParameters:a}),map.addLayers([s,assessorServiceLayer,h,transportationServiceLayer,bcLayer,f])});break;case"clark county plu":r="http://maps.clarkcountynv.gov/arcgis_images/rest/services/CACHED/mostcurrentflight/MapServer",a="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/PlanedLandUse/MapServer";w=new esri.layers.ArcGISTiledMapServiceLayer(r,{id:"basemap"});PLULayer=new esri.layers.ArcGISDynamicMapServiceLayer(a,{id:"PLULayer",opacity:.7}),map.addLayers([w,PLULayer,h,f]);break;case"clark county zoning":require(["esri/layers/ArcGISDynamicMapServiceLayer","esri/layers/ImageParameters"],function(e,r){var a=new r;a.layerIds=[9],a.layerOption=r.LAYER_OPTION_SHOW,map.removeAllLayers(),primaryLayer="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/Zoning/MapServer/",secondaryLayer="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/AssessorMap/MapServer",tertiaryLayer="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/scl/MapServer";var s=new esri.layers.ArcGISTiledMapServiceLayer(t.url,{id:"basemap"});assessorServiceLayer=new esri.layers.ArcGISDynamicMapServiceLayer(secondaryLayer,{id:"assessorServiceLayer"}),transportationServiceLayer=new esri.layers.ArcGISDynamicMapServiceLayer(tertiaryLayer,{id:"transportationServiceLayer"}),CCZoningLayer=new esri.layers.ArcGISDynamicMapServiceLayer(primaryLayer,{id:"CCZoningLayer",opacity:.7,imageParameters:a}),map.addLayers([s,assessorServiceLayer,h,transportationServiceLayer,CCZoningLayer,f])});break;case"contours 50 meter":map.removeAllLayers(),r="http://maps.clarkcountynv.gov/arcgis_images/rest/services/CACHED/mostcurrentflight/MapServer",a="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/AssessorMap/MapServer",s="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/con_50M/MapServer";w=new esri.layers.ArcGISTiledMapServiceLayer(r,{id:"basemap"});assessorServiceLayer=new esri.layers.ArcGISDynamicMapServiceLayer(a,{id:"assessorServiceLayer"}),C50Layer=new esri.layers.ArcGISDynamicMapServiceLayer(s,{id:"C50Layer"}),map.addLayers([w,C50Layer,assessorServiceLayer,f]);break;case"contours 2016 2ft (valley)":map.removeAllLayers(),r="http://maps.clarkcountynv.gov/arcgis_images/rest/services/CACHED/mostcurrentflight/MapServer",a="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/AssessorMap/MapServer",s="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/con2016_2ft/MapServer";w=new esri.layers.ArcGISTiledMapServiceLayer(r,{id:"basemap"});assessorServiceLayer=new esri.layers.ArcGISDynamicMapServiceLayer(a,{id:"assessorServiceLayer"}),C2016Layer=new esri.layers.ArcGISDynamicMapServiceLayer(s,{id:"C2016Layer"}),map.addLayers([w,C2016Layer,assessorServiceLayer,f]);break;case"contours 2003 5ft (valley)":map.removeAllLayers(),r="http://maps.clarkcountynv.gov/arcgis_images/rest/services/CACHED/mostcurrentflight/MapServer",a="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/AssessorMap/MapServer",s="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/con_03_5ft/MapServer";w=new esri.layers.ArcGISTiledMapServiceLayer(r,{id:"basemap"});assessorServiceLayer=new esri.layers.ArcGISDynamicMapServiceLayer(a,{id:"assessorServiceLayer"}),C2003Layer=new esri.layers.ArcGISDynamicMapServiceLayer(s,{id:"C2003Layer"}),map.addLayers([w,C2003Layer,assessorServiceLayer,f]);break;case"contours 1996 5ft (valley)":map.removeAllLayers(),r="http://maps.clarkcountynv.gov/arcgis_images/rest/services/CACHED/mostcurrentflight/MapServer",a="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/AssessorMap/MapServer",s="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/con_96_5ft/MapServer";w=new esri.layers.ArcGISTiledMapServiceLayer(r,{id:"basemap"});assessorServiceLayer=new esri.layers.ArcGISDynamicMapServiceLayer(a,{id:"assessorServiceLayer"}),C1996Layer=new esri.layers.ArcGISDynamicMapServiceLayer(s,{id:"C1996Layer"}),map.addLayers([w,C1996Layer,assessorServiceLayer,f]);break;case"default":map.removeAllLayers(),r="http://maps.clarkcountynv.gov/arcgis_images/rest/services/CACHED/mostcurrentflight/MapServer",a="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/AssessorMap/MapServer",s="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/scl/MapServer";w=new esri.layers.ArcGISTiledMapServiceLayer(r,{id:"basemap"});assessorServiceLayer=new esri.layers.ArcGISDynamicMapServiceLayer(a,{id:"assessorServiceLayer"}),transportationServiceLayer=new esri.layers.ArcGISDynamicMapServiceLayer(s,{id:"transportationServiceLayer"}),map.addLayers([w,assessorServiceLayer,h,transportationServiceLayer,f]);break;case"henderson zoning":require(["esri/layers/ArcGISDynamicMapServiceLayer","esri/layers/ImageParameters"],function(e,r){var a=new r;a.layerIds=[7],a.layerOption=r.LAYER_OPTION_SHOW,map.removeAllLayers(),primaryLayer="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/Zoning/MapServer",secondaryLayer="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/AssessorMap/MapServer",tertiaryLayer="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/scl/MapServer";var s=new esri.layers.ArcGISTiledMapServiceLayer(t.url,{id:"basemap"});assessorServiceLayer=new esri.layers.ArcGISDynamicMapServiceLayer(secondaryLayer,{id:"assessorServiceLayer"}),transportationServiceLayer=new esri.layers.ArcGISDynamicMapServiceLayer(tertiaryLayer,{id:"transportationServiceLayer"}),hendersonZoningLayer=new esri.layers.ArcGISDynamicMapServiceLayer(primaryLayer,{id:"hendersonZoningLayer",opacity:.7,imageParameters:a}),map.addLayers([s,assessorServiceLayer,h,transportationServiceLayer,hendersonZoningLayer,f])});break;case"las vegas zoning":require(["esri/layers/ArcGISDynamicMapServiceLayer","esri/layers/ImageParameters"],function(e,r){var a=new r;a.layerIds=[5],a.layerOption=r.LAYER_OPTION_SHOW,map.removeAllLayers(),primaryLayer="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/Zoning/MapServer",secondaryLayer="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/AssessorMap/MapServer",tertiaryLayer="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/scl/MapServer";var s=new esri.layers.ArcGISTiledMapServiceLayer(t.url,{id:"basemap"});assessorServiceLayer=new esri.layers.ArcGISDynamicMapServiceLayer(secondaryLayer,{id:"assessorServiceLayer"}),transportationServiceLayer=new esri.layers.ArcGISDynamicMapServiceLayer(tertiaryLayer,{id:"transportationServiceLayer"}),lasVegasZoningLayer=new esri.layers.ArcGISDynamicMapServiceLayer(primaryLayer,{id:"lasVegasZoningLayer",opacity:.7,imageParameters:a}),map.addLayers([s,assessorServiceLayer,h,transportationServiceLayer,lasVegasZoningLayer,f])});break;case"mesquite zoning":require(["esri/layers/ArcGISDynamicMapServiceLayer","esri/layers/ImageParameters"],function(e,r){var a=new r;a.layerIds=[11],a.layerOption=r.LAYER_OPTION_SHOW,map.removeAllLayers(),primaryLayer="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/Zoning/MapServer",secondaryLayer="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/AssessorMap/MapServer",tertiaryLayer="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/scl/MapServer";var s=new esri.layers.ArcGISTiledMapServiceLayer(t.url,{id:"basemap"});assessorServiceLayer=new esri.layers.ArcGISDynamicMapServiceLayer(secondaryLayer,{id:"assessorServiceLayer"}),transportationServiceLayer=new esri.layers.ArcGISDynamicMapServiceLayer(tertiaryLayer,{id:"transportationServiceLayer"}),mesquiteZoningLayer=new esri.layers.ArcGISDynamicMapServiceLayer(primaryLayer,{id:"mesquiteZoningLayer",opacity:.7,imageParameters:a}),map.addLayers([s,assessorServiceLayer,h,transportationServiceLayer,mesquiteZoningLayer,f])});break;case"north las vegas zoning":require(["esri/layers/ArcGISDynamicMapServiceLayer","esri/layers/ImageParameters"],function(e,r){var a=new r;a.layerIds=[8],a.layerOption=r.LAYER_OPTION_SHOW,map.removeAllLayers(),primaryLayer="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/Zoning/MapServer",secondaryLayer="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/AssessorMap/MapServer",tertiaryLayer="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/scl/MapServer";var s=new esri.layers.ArcGISTiledMapServiceLayer(t.url,{id:"basemap"});assessorServiceLayer=new esri.layers.ArcGISDynamicMapServiceLayer(secondaryLayer,{id:"assessorServiceLayer"}),transportationServiceLayer=new esri.layers.ArcGISDynamicMapServiceLayer(tertiaryLayer,{id:"transportationServiceLayer"}),nlvZoningLayer=new esri.layers.ArcGISDynamicMapServiceLayer(primaryLayer,{id:"nlvZoningLayer",opacity:.7,imageParameters:a}),map.addLayers([s,assessorServiceLayer,h,transportationServiceLayer,nlvZoningLayer,f])});break;case"seismic":require(["esri/layers/ArcGISDynamicMapServiceLayer","esri/layers/ImageParameters"],function(e,r){var a=new r;a.layerIds=[5],a.layerOption=r.LAYER_OPTION_SHOW,map.removeAllLayers(),primaryLayer="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/Zoning/MapServer/",secondaryLayer="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/AssessorMap/MapServer",tertiaryLayer="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/scl/MapServer";var s=new esri.layers.ArcGISTiledMapServiceLayer(t.url,{id:"basemap"});assessorServiceLayer=new esri.layers.ArcGISDynamicMapServiceLayer(secondaryLayer,{id:"assessorServiceLayer"}),transportationServiceLayer=new esri.layers.ArcGISDynamicMapServiceLayer(tertiaryLayer,{id:"transportationServiceLayer"}),seismicLayer=new esri.layers.ArcGISDynamicMapServiceLayer(primaryLayer,{id:"seismicLayer",opacity:.7,imageParameters:a}),map.addLayers([s,assessorServiceLayer,h,transportationServiceLayer,seismicLayer,f])});break;case"soil guideline":map.removeAllLayers(),r="http://maps.clarkcountynv.gov/arcgis_images/rest/services/CACHED/mostcurrentflight/MapServer",a="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/SoilsGuideline/MapServer";w=new esri.layers.ArcGISTiledMapServiceLayer(r,{id:"basemap"});SoilLayer=new esri.layers.ArcGISDynamicMapServiceLayer(a,{id:"SoilLayer",opacity:.7}),map.addLayers([w,SoilLayer,h,f]);break;default:map.removeAllLayers(),r="http://maps.clarkcountynv.gov/arcgis_images/rest/services/CACHED/mostcurrentflight/MapServer",a="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/AssessorMap/MapServer",s="https://maps.clarkcountynv.gov/arcgis/rest/services/GISMO/scl/MapServer";w=new esri.layers.ArcGISTiledMapServiceLayer(r,{id:"basemap"});assessorServiceLayer=new esri.layers.ArcGISDynamicMapServiceLayer(a,{id:"assessorServiceLayer"}),transportationServiceLayer=new esri.layers.ArcGISDynamicMapServiceLayer(s,{id:"transportationServiceLayer"}),map.addLayers([w,assessorServiceLayer,h,transportationServiceLayer,f])}console.log(" -------------------- "+freshView+" -------------------- "),console.log("layerUrlMain: "+r),console.log("layerUrlSecondary: "+a),console.log("layerUrlTertiary: "+s),$("#currentViewTag").text(freshView)}I.coordOptions=[{name:"State Plane ft. ",value:"state-plane-ft"},{name:"Lat / Long",value:"lat-long"}],I.selectedOption=I.coordOptions[0],I.toolOptions=[{name:"Draw ...",value:"draw-tool"}],I.selectedToolOption=I.toolOptions[0],I.changeCoords=function(e){if(locale=window.location.search.substring(1).split("@")[1],"state-plane-ft"===e.value){var r=servicePrefix+'arcgis/rest/services/Utilities/Geometry/GeometryServer/project?inSR=4326&outSR=102707&f=pjson&geometries={"geometryType":"esriGeometryPoint","geometries":[{"x":'+locale.split(",")[1]+',"y":'+locale.split(",")[0]+"}]}";l.jsonp(r+"&callback=JSON_CALLBACK").success(function(e){console.log(e.geometries[0].x),thedfX=parseInt(e.geometries[0].x),thedfY=parseInt(e.geometries[0].y),console.log(thedfX,thedfY),showX.innerHTML="<b>X: </b>"+thedfX,showY.innerHTML="<b>Y: </b>"+thedfY;var r="?@"+thedfX+","+thedfY+","+map.getLevel();if(void 0!==history.pushState){var a={Page:"page",Url:r};history.pushState(a,a.Page,a.Url)}else window.location.href="@homePage"}).error(function(e){console.log("err"+e)}),coordSystem="state-plane-ft"}else if("lat-long"===e.value){r=servicePrefix+'arcgis/rest/services/Utilities/Geometry/GeometryServer/project?inSR=102707&outSR=4326&f=pjson&geometries={"geometryType":"esriGeometryPoint","geometries":[{"x":'+locale.split(",")[0]+',"y":'+locale.split(",")[1]+"}]}";l.jsonp(r+"&callback=JSON_CALLBACK").success(function(e){console.log(e.geometries[0].y.toFixed(7)),console.log(e.geometries[0].x.toFixed(7)),thedfX=e.geometries[0].y.toFixed(7),thedfY=e.geometries[0].x.toFixed(7),showX.innerHTML="<b>X: </b>"+thedfX,showY.innerHTML="<b>Y: </b>"+thedfY;var r="?@"+thedfX+","+thedfY+","+map.getLevel();if(void 0!==history.pushState){var a={Page:"page",Url:r};history.pushState(a,a.Page,a.Url)}else window.location.href="@homePage"}).error(function(e){console.log("err"+e)}),coordSystem="lat-long"}},I.changeURL=function(e,r){if(void 0!==history.pushState){var a={Page:e,Url:r};history.pushState(a,a.Page,a.Url)}else window.location.href="@homePage"},I.configURLParse=function(e,r){r||(r=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var a=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(r);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null},I.themeSet=function(){"dark"===localStorage.theme?I.layout="dark":"light"===localStorage.theme?I.layout="light":I.layout="county",console.log("M [[ "+localStorage.theme+" theme applied ]]"),I.configLoad=function(){var a=window.location.search.substring(1).split("@")[1],e=I.configURLParse("view"),r=I.configURLParse("legend"),s=I.configURLParse("weather"),t=I.configURLParse("tab"),o=I.configURLParse("fullmap");if(console.log(a),a)if(-1<a.indexOf(","))if(1<a.split(",")[0]&&a.split(",")[1]<0){coordSystem="lat-long",I.selectedOption=I.coordOptions[1],console.log("lat/long"),I.thePointInfo.X=a.split(",")[0],I.thePointInfo.Y=a.split(",")[1],thexc=a.split(",")[0],theyc=a.split(",")[1];var i=servicePrefix+'arcgis/rest/services/Utilities/Geometry/GeometryServer/project?inSR=4326&outSR=102707&f=pjson&geometries={"geometryType":"esriGeometryPoint","geometries":[{"x":'+theyc+',"y":'+thexc+"}]}";l.jsonp(i+"&callback=JSON_CALLBACK").success(function(e){thedfX=parseInt(e.geometries[0].x),thedfY=parseInt(e.geometries[0].y),require(["esri/geometry/Point","esri/SpatialReference"],function(e,r){map.centerAndZoom(new e(thedfX,thedfY,new r({wkid:102707})),a.split(",")[2])})}).error(function(e){console.log("err"+e)})}else coordSystem="state-plane-ft",require(["esri/geometry/Point","esri/SpatialReference"],function(e,r){map.centerAndZoom(new e(a.split(",")[0],a.split(",")[1],new r({wkid:102707})),a.split(",")[2])});else-1<!a.indexOf(",")&&(console.log("parcel add owner"),I.executeSearch(a,null));else console.log("C [[ fresh extent - Welcome! ]]"),coordSystem="state-plane-ft",map.setExtent(initialExtent);e&&(console.log(e),setTimeout(function(){S(e)},250)),r&&(console.log(r),"t"===r&&(I.theLegend=!0)),s&&(console.log(s),"t"===s&&(I.theWeather=!0)),t&&("display"===t?setTimeout(function(){$("#introTab").removeClass("active"),$("#displayTab").addClass("active"),$("#toolsTab").removeClass("active"),$("#resourcesTab").removeClass("active"),$(".tackLi").removeClass("active"),$(".compassLi").addClass("active"),$(".pencilLi").removeClass("active"),$(".gearLi").removeClass("active")},250):"tools"===t?setTimeout(function(){$("#introTab").removeClass("active"),$("#displayTab").removeClass("active"),$("#toolsTab").addClass("active"),$("#resourcesTab").removeClass("active"),$(".tackLi").removeClass("active"),$(".compassLi").removeClass("active"),$(".pencilLi").addClass("active"),$(".gearLi").removeClass("active")},250):"resources"===t&&setTimeout(function(){$("#introTab").removeClass("active"),$("#displayTab").removeClass("active"),$("#toolsTab").removeClass("active"),$("#resourcesTab").addClass("active"),$(".tackLi").removeClass("active"),$(".compassLi").removeClass("active"),$(".pencilLi").removeClass("active"),$(".gearLi").addClass("active")},250)),o&&"t"===o&&setTimeout(function(){$("#introToggle").trigger("click")},250)}},I.viewSet=function(){I.selectedViewDefault.vname,localStorage.view,console.log("M [[ "+localStorage.view+" view applied ]]")},I.saveTheme=function(){"dark"===I.layout?I.layout="county":I.layout="dark",console.log("THE CURRENTLY ACTIVE THEME IS "+I.layout),localStorage.setItem("theme",I.layout),console.log("testing scope layout val: "+I.layout)},I.saveView=function(){localStorage.setItem("view",I.selectedViewDefault.vname),console.log("successful pass off from line 1380 function call to save view to local storage, which was triggered by view dropdown: "+I.selectedViewDefault.vname)},I.themeSet(),I.layouts=[{name:"default",url:"county"},{name:"county",url:"county"},{name:"dark",url:"dark"},{name:"light",url:"light"}],I.thePoint=[],I.thePointInfo=[],I.data=[],I.attr=[],I.street=[],I.alias=!0,I.toggle=!0,I.forecasttoggle=!1,I.viewChange=S,I.flightChange=function(e){var r,a=e.name,s=map.getLayer("basemap");map.removeLayer(s),r=servicePrefix+serviceSuffix_F+"CACHED/"+e.name+"/"+e.type;var t=new esri.layers.ArcGISTiledMapServiceLayer(r,{id:"basemap"});map.addLayer(t,0),$("#currentFlightTag").text(a),console.log("this is the flight source / layer url "+r)},I.introDate=[],I.Views=[],$(function(){var e=(s=new Date).getDate(),r=s.getMonth()+1,a=new Array;a[0]="Jan",a[1]="Feb",a[2]="Mar",a[3]="Apr",a[4]="May",a[5]="June",a[6]="July",a[7]="Aug",a[8]="Sept",a[9]="Oct",a[10]="Nov",a[11]="Dec",e<10&&(e="0"+e),r<10&&(r="0"+r);var s=a[s.getMonth()]+" "+e+", "+s.getFullYear();I.introDate=s,l.get("resources/config/intro.txt").success(function(e){t=e[0],I.Updates=[];for(var r=[],a=0;a<t.updatesList.length;a++)r.push(t.updatesList[a]);I.Updates=r})}),$(function(){l.get("resources/config/views.txt").success(function(e){c=e[0];for(var r=[],a=0;a<c.viewList.length;a++)r.push(c.viewList[a]);I.Views=r,I.selectedViewDefault=I.Views[1],y=e[0],I.customListsID=[],I.customListsNAME=[],I.customListsACTIVE=[],I.customListsSRC=[];var s=[],t=[],o=[],i=[];for(a=0;a<y.customList.length;a++)s.push(y.customList[a].vid);for(a=0;a<y.customList.length;a++)t.push(y.customList[a].vname);for(a=0;a<y.customList.length;a++)o.push(y.customList[a].vactive);for(a=0;a<y.customList.length;a++)i.push(y.customList[a].vsrc);I.customListsID=s,I.customListsNAME=t,I.customListsACTIVE=o,I.customListsSRC=i,console.log("THE OWL DATA "+I.customListsID),console.log("THE OWL DATA "+I.customListsNAME),console.log("THE OWL DATA "+I.customListsACTIVE),console.log("THE OWL DATA "+I.customListsSRC)})}),$(function(){l.jsonp(servicePrefix+serviceSuffix_F+serviceType_F+"?f=pjson&callback=JSON_CALLBACK").then(function(e){s=e.data,I.Flights=[];for(var r=[],a=0;a<s.services.length;a++)s.services[a].name=/[^/]*$/.exec(s.services[a].name)[0],r.push(s.services[a]);I.Flights=r,I.selectedFlightDefault=I.Flights[37],console.log("SHOW ME THE JSON FOR THE FLIGHTS "+JSON.stringify(s))})}),I.addressGraber=[],I.aerialDate=[],I.elecOfficial=[],I.linkInfo=[],I.printViewLink=[],I.weather=[];var d=["ALY","ANX","AVE","BND","BLF","BLVD","BRK","BYP","CYN","CIR","CT","CV","CRK","CRES","CRST","XING","DR","EXPY","FRK","FWY","HTS","HWY","HL","JCT","LN","LOOP","MTN","PARK","PKWY","PASS","PATH","PL","PLZ","PT","RNCH","RDG","RD","RTE","RUN","SPG","SPUR","SQ","STRA","ST","SMT","TER","TRAK","TRL","VLY","VW","VIS","WALK","WAY"];I.executeSearch=function(e,r){if(null!=r)I.ajaxAddress(e,r),console.log("(3) EXECUTING SIMPLE PASS OFF TO AJAX ADDRESS ALONG WITH MAGIC");else{try{return-1<e.indexOf("~")?(e=e.replace(/\D/g,""),console.log("C [[ SEARCH RESOLVED AS AN OWNER ]]"),void I.ajaxAPN(e)):e.match(/^(?=.*[a-zA-Z])(?=.*[0-9])/)?(I.ajaxAddress(e,null),void console.log("C [[ SEARCH RESOLVED AS AN ADDRESS ]]")):e.match(/(?![a-zA-Z]).*/)?(I.ajaxAPN(e),void console.log("C [[ SEARCH RESOLVED AS AN APN ]]")):void console.log("C [[ SEARCH RESOLVED AS A NONE ]]")}catch(e){return void console.log("C [[ SEARCH REGEX RESOLVED AS AN ERROR ]]")}}},I.ajaxAddress=function(e,r){if(null!=r){console.log("(4) AJAXADDRESS; THE MAGIC KEY, WHICH SHOULD BE ONE, IS: "+JSON.stringify(r));var a=servicePrefix+"arcgis/rest/services/Locators/Clark_County_Composite_All/GeocodeServer/findAddressCandidates?";return l.jsonp(a+"Street="+e+"&SingleLine=&category=&outFields=&maxLocations=&outSR=&searchExtent=&location=&distance=&magicKey="+r+"&f=pjson&callback=JSON_CALLBACK").then(function(e){try{if(void 0===JSON.stringify(e.data.candidates[0]))ai("nolocation"),console.log("it didnt come up");else{console.log("and then it went crazy");var r=e.data.candidates[0].location.x,a=e.data.candidates[0].location.y;I.executeQueryTask(r,a,"magi")}}catch(e){}})}console.log("OR ELSE ITS STILL HITTING THE OLD COMPOSIT LOCATOR");a="http://gisgate.co.clark.nv.us/arcgis/rest/services/CompositLocator/GeocodeServer/findAddressCandidates?";return l.jsonp(a+"Street="+e+"&SingleLine=&outFields=&outSR=&searchExtent=&f=pjson&callback=JSON_CALLBACK").then(function(e){try{var r=e.data.candidates[0].location.x,a=e.data.candidates[0].location.y}catch(e){}I.executeQueryTask(r,a,"search")})},I.ajaxAPN=function(t){console.log("hit apn search");var e=servicePrefix+"gismo/webservice/GISDataWCF/GISDataService.svc/jsonep/parcelSearch?";return l.jsonp(e+"method=gismo&parcel="+t+"&callback=JSON_CALLBACK").then(function(e){try{if(0<e.data.rings.length){var r='{"rings" :'+e.data.rings+',"spatialReference":{"wkid":102707}}';map.graphics.clear();var a={geometry:JSON.parse(r),symbol:{color:[255,255,0,.3],outline:{color:[212,121,224,255],width:3,type:"esriSLS",style:"esriSLSSolid"},type:"esriSFS",style:"esriSFSSolid"}},s=new esri.Graphic(a);11==t.length&&map.graphics.add(s),require(["esri/geometry/Point","esri/SpatialReference"],function(e,r){map.centerAndZoom(new e(s.geometry.getExtent().getCenter().x,s.geometry.getExtent().getCenter().y,new r({wkid:102707})),5)})}else console.log("C [[ parcel not found ]]")}catch(e){}})},I.mapevtMouseMove=function(e,r){var a=document.getElementById("showX"),s=document.getElementById("showY");"state-plane-ft"===coordSystem?a&&(I.thePoint.X=Math.round(e),I.thePoint.Y=Math.round(r),a.innerHTML="<b>X: </b>"+I.thePoint.X,s.innerHTML="<b>Y: </b>"+I.thePoint.Y):"lat-long"===coordSystem&&a&&I.thePointInfo.X&&(I.thePoint.X=I.thePointInfo.X,I.thePoint.Y=I.thePointInfo.Y,a.innerHTML="<b>X: </b>"+I.thePoint.X,s.innerHTML="<b>Y: </b>"+I.thePoint.Y)},I.mapevtExtentChange=function(e,r,s){if("state-plane-ft"===coordSystem){var a="?@"+Math.round(e)+","+Math.round(r)+","+s;if(void 0!==history.pushState){var t={Page:"page",Url:a};history.pushState(t,t.Page,t.Url)}else window.location.href="@homePage"}else if("lat-long"===coordSystem){var o=servicePrefix+'arcgis/rest/services/Utilities/Geometry/GeometryServer/project?inSR=102707&outSR=4326&f=pjson&geometries={"geometryType":"esriGeometryPoint","geometries":[{"x":'+e+',"y":'+r+"}]}";l.jsonp(o+"&callback=JSON_CALLBACK").success(function(e){console.log(e.geometries[0].x.toFixed(7)),console.log(e.geometries[0].y.toFixed(7)),I.thePointInfo.X=e.geometries[0].y.toFixed(7),I.thePointInfo.Y=e.geometries[0].x.toFixed(7);var r="?@"+e.geometries[0].y.toFixed(7)+","+e.geometries[0].x.toFixed(7)+","+s;if(void 0!==history.pushState){var a={Page:"page",Url:r};history.pushState(a,a.Page,a.Url)}else window.location.href="@homePage"}).error(function(e){console.log("err"+e)})}},I.executeQueryTask=function(i,n,c){console.log("(5) EXECUTE MAGI COMES IN AS: "+i,n),I.printBase=void 0;var e=servicePrefix+"gismo/webservice/GISDataWCF/GISDataService.svc/jsonep/PointToParcel?";l.jsonp(e+"method=gismo&xcoordinate="+i+"&ycoordinate="+n+"&returnGeometry=true&wkid=102707&callback=JSON_CALLBACK").success(function(e){var r='{"rings" :'+e.parcelGeometry+',"spatialReference":{"wkid":102707}}';map.graphics.clear();var a={geometry:JSON.parse(r),symbol:{color:[255,255,0,.3],outline:{color:[212,121,224,255],width:3,type:"esriSLS",style:"esriSLSSolid"},type:"esriSFS",style:"esriSFSSolid"}},s=new esri.Graphic(a);if("select"===c&&map.graphics.add(s),"search"===c&&(map.graphics.add(s),map.setExtent(s.geometry.getExtent(),!0)),"magi"===c){console.log("(6) RESOLVED AS X/Y: "+i+" ,"+n);var t=new esri.geometry.Point({x:i,y:n,spatialReference:{wkid:102707}});map.graphics.clear();var o=new esri.symbol.PictureMarkerSymbol({angle:0,xoffset:0,yoffset:10,type:"esriPMS",url:"images/pin.png",contentType:"image/png",width:34,height:34});currentGraphic=new esri.Graphic(t,o),map.graphics.add(currentGraphic),map.centerAndZoom(t,9)}I.getOwnerRequest(e),p.getArielFlightDate(i,n).then(function(e){I.aerialDate=e}),p.getOfficials(i,n).then(function(e){I.elecOfficial=e}),p.getSelectPropertyLinks(e).then(function(e){I.linkInfo=e}),p.getFloodZoneInfo(e).then(function(e){I.floodZone=e}),p.getZoning(i,n).then(function(e){I.zoning=e}),p.getCommunityDist(i,n).then(function(e){I.PLU=e}),p.getLandUse(i,n).then(function(e){I.land=e}),p.getOverlays(i,n).then(function(e){I.Overlays=e}),p.getPLU(i,n).then(function(e){I.thePLU=e}),searchHasCompleted=!0,I.attr=e}).error(function(e){I.data="Request failed"})},I.getOwnerRequest=function(e){var i=e.parcel;l.jsonp(servicePrefix+"gismo/webservice/GISDataWCF/GISDataService.svc/jsonep/getPropertyInfo?parcel="+e.parcel+"&callback=JSON_CALLBACK").success(function(r,e){if(null===r.SaleDate||""===r.SaleDate)r.SaleDate="Not Available";else{var a=r.SaleDate,s=a.substr(4)+"/"+a.substr(0,4);r.SaleDate=s}null===r.SalePrice||""===r.SalePrice?r.SalePrice="Not Available":(r.SalePrice=n("number")(r.SalePrice,"0"),r.SalePrice="$"+r.SalePrice),rightofwayCheck=i.substring(6,i.length-3),"99"===rightofwayCheck?(r.OwnerName="Public Right-of-Way",$(".spF1, .spF2, .spF4, .spF9, .spF10").css("display","block"),$(".spF3, .spF5, .spF6, .spF7, .spF8").css("display","none"),$(".spG4").css("display","none"),console.log("C [[ public right-of-way ]]")):"95"===rightofwayCheck?(r.OwnerName="Private Right-of-Way",$(".spF1, .spF2, .spF4, .spF9, .spF10").css("display","block"),$(".spF3, .spF5, .spF6, .spF7, .spF8").css("display","none"),$(".spG4").css("display","none"),console.log("C [[ private right-of-way ]]")):($(".spF1, .spF2, .spF3, .spF4, .spF5, .spF6, .spF7, .spF8, .spF9, .spF10").css("display","block"),$(".spG4").css("display","block"),console.log("C [[ regular parcel ]]")),console.log("C [[ acShowing: "+autocompleteIsShowing+" | acDirty: "+autocompleteDirty+" | searchCompleted: "+searchHasCompleted+" ]]"),"none"==$("#tester .dropdown-menu").css("display")?autocompleteIsShowing=!1:autocompleteIsShowing=!0,console.log("auto is showing: "+autocompleteIsShowing),console.log("ac dirty?: "+autocompleteDirty),console.log("search has complete: "+searchHasCompleted),console.log("side panel open?: "+skinnyPanelOpen),console.log("input length: "+$("#tester input").val().length),I.propInfoVisNew(1),I.data=r,console.log("C [[ current parcel: "+i+" ]]");var t="<div id='scrollSheet'><div class='popup_Spacer'></div><b>Parcel:</b> "+i+"<br> <b>Owner:</b> "+r.OwnerName+"<br><b>Add.:</b> "+r.SiteAddress;if(t+="<br><b>Acres:</b> "+r.CalcAcres,map.infoWindow.setTitle("<table id='popup_Table' style='margin-top:-2px;margin-bottom:-5px; width:150px; border:0px;' class='infoWindowCustom' border='0'><tr><td><i class='glyphicon glyphicon-info-sign'></i></td><td>Property Info</td></tr></table>"),map.infoWindow.setContent(t),map.infoWindow.resize(200,150),$(".maximize").click(function(){if(isMax%2==0){console.log("is odd"),isMax+=1;var e="<div class='popup_Spacer'></div><b>Parcel:</b> "+i+"<br> <b>Owner:</b> "+r.OwnerName+"<br><b>Add.:</b> "+r.SiteAddress;e+="<br><b>Acres:</b> "+r.CalcAcres,e+="<br><br><b>Sale Date: </b> "+r.SaleDate,e+="<br><b>Sale Price: </b> "+r.SalePrice,e+="<br><b>Const. Year: </b> "+r.ConsructionYear,e+="<br><b>Doc Number: </b> <a class='infoLinks' target='_blank' href='http://maps.clarkcountynv.gov/assessor/webimages/default.asp?appID=1&txtdocNum=data.DocNumber'>"+r.DocNumber+"</a>",e+="<br><b>Subd. Name: </b> "+r.SubName,e+="<br><b>Lot Block: </b> "+r.LotBlock,e+="<br><b>Aerial Date: </b> "+r.aerialDate,e+="<br><b>T-R-S: </b> "+r.TownshipRangeSection,e+="<br><b>Book Page: </b> "+r.AssessorBook+", "+r.AssessorPage,e+="<br><br><b>Links</b>",e+="<br><a id='infoLink0_mob' class='infoLinks' target='_blank' href='{{linkInfo.AssessorInformation}}'>Assessor's Information</a>",e+="<br><a id='infoLink1_mob' class='infoLinks' target='_blank' href='{{linkInfo.AssessorParcelmaps}}'>Assessor's Parcel Map</a>",e+="<br><a id='infoLink2_mob' class='infoLinks' target='_blank' href='{{linkInfo.TreasurerInformation}}'>Treasurer's Information</a>",e+="<br><a id='infoLink3_mob' class='infoLinks' target='_blank' href='{{linkInfo.DocumnetImagingRecords}}'>Document Image Records</a>",e+="<br><a id='infoLink4_mob' class='infoLinks' target='_blank' href='{{linkInfo.SoilGuidlinesLink}}'>Soil Guidelines Map</a>",e+="<br><a id='infoLink5_mob' class='infoLinks' target='_blank' href='{{linkInfo.ExpansiveSoilGuidelinesLink}}'>Expansive Soil Guidelines Map</a>",e+="<br><a id='infoLink6_mob' class='infoLinks' target='_blank' href='{{linkInfo.FloodZoneInformation}}'>Flood Zone Information</a>",e+="<br><a id='infoLink7_mob' class='infoLinks' target='_blank' href='http://maps.clarkcountynv.gov/openweb?getparcel={{attr.parcel}}'>Mail Link of Current Parcel</a>",map.infoWindow.setContent(e)}else console.log("is even"),isMax+=1}),m=r.SiteAddress,p.getWeather(I.theWeather,r.ZipCode).then(function(e){I.weather=e}),p.getValuation(I.theValuation,r.SiteAddress).then(function(e){I.valuation=e}),I.getOwnershipHistory(i),p.getSCLZip(m).then(function(e){I.sclZip=e}),m){var o=(m=(m=m.replace(/\s+/g," ")).trim()).split(" ")[1];for(1===o.length&&(/S/i.test(o)||/N/i.test(o)||/E/i.test(o)||/W/i.test(o))&&(m=(m=(m=(m=m.replace(o,"")).replace(/(^\s*)|(\s*$)/gi,"")).replace(/[ ]{2,}/gi," ")).replace(/\n /,"\n"),console.log("C [[ street contains directional ]]")),(g=m.split(" "))[g.length-1],length=d.length;length--;)-1!=m.indexOf(d[length])&&(v=m.lastIndexOf(" "),m=m.substring(0,v),console.log("C [[ street contains streetType ]]"));$("#search-form input").val(m),m?""===m?$("#closeIcon").hide():$("#closeIcon").show():$("#closeIcon").hide()}else $("#search-form input").val(i),i?""===i?$("#closeIcon").hide():$("#closeIcon").show():$("#closeIcon").hide()})},I.getStreetView=function(e,r){l.jsonp(servicePrefix+"gismo/webservice/GISDataWCF/GISDataService.svc/jsonep/projectPoint?inputWKID=3421&outwkid=4326&Xcoordinate="+e+"&Ycoordinate="+r+"&callback=JSON_CALLBACK").success(function(e){var r=e.yCoordinate,a=e.xCoordinate;console.log(r,a),!0===strViewOverride?(wickedLocation=new google.maps.LatLng(r,a),sv.getPanorama({location:wickedLocation,radius:50},function(e,r){r===google.maps.StreetViewStatus.OK?(panorama.setPano(e.location.pano),console.log("StreetView: "+r),console.log("StreetView locale: "+wickedLocation),console.log("SV data: "+e),$("li#streetViewList").removeClass("disable_StreetList"),$("li#streetViewList").addClass("enable_StreetList")):"ZERO_RESULTS"===r&&(console.log("StreetView: "+r),console.log("StreetView locale: "+wickedLocation),console.log("SV data: "+e),$("li#streetViewList").removeClass("enable_StreetList"),$("li#streetViewList").addClass("disable_StreetList"))})):(I.toggle=!0,wickedLocation=new google.maps.LatLng(r,a),sv.getPanorama({location:wickedLocation,radius:50},function(e,r){r===google.maps.StreetViewStatus.OK?(panorama.setPano(e.location.pano),panorama.setVisible(!0),I.toggle=!0,console.log("StreetView: "+r),console.log("StreetView locale: "+wickedLocation),$("li#streetViewList").removeClass("disable_StreetList"),$("li#streetViewList").addClass("enable_StreetList")):"ZERO_RESULTS"===r&&(I.toggle=!1,console.log("StreetView: "+r),console.log("StreetView locale: "+wickedLocation),$("li#streetViewList").removeClass("enable_StreetList"),$("li#streetViewList").addClass("disable_StreetList"))}))})},I.getOwnershipHistory=function(e){l.jsonp(servicePrefix+"gismo/webservice/GISDataWCF/GISDataService.svc/jsonep/getOwnershipHistory?parcel="+e+"&callback=JSON_CALLBACK").success(function(e,r){console.log("getOwnershipHistory :: "+JSON.stringify(e)),I.ownershipHist=e})},I.constructPrintFriendly=function(e){var r="map="+e,a="&parcel="+I.attr.parcel,s="&Oname="+I.data.OwnerName,t="&SAddress="+I.data.SiteAddress,o="&Juris="+I.zoning.jurisdiction+" - "+I.data.ZipCode,i="&SubdName="+I.data.SubName,n="&LotBlock="+I.data.LotBlock,c="&ConYear="+I.data.ConsructionYear,l="&SaleDate="+I.data.SaleDate,p="&SalePrice="+I.data.SalePrice,y="&trs="+I.data.TownshipRangeSection,m="&RecordedDocNum="+I.data.DocNumber,g="&EstLotSize="+I.data.CalcAcres,v="&FlightDate="+I.aerialDate,S="&Zone="+I.zoning.zoneDescription,d="&USSenate="+I.elecOfficial.Senate,L="&USCongress="+I.elecOfficial.Congress,u="&StateSenate="+I.elecOfficial.StateSenate,h="&StateAssembly="+I.elecOfficial.StateAssembly,f="&SchoolDisttrict="+I.elecOfficial.SchoolBoard,w="&UniversityRegent="+I.elecOfficial.UniversityRegent,A="&BoardEducation="+I.elecOfficial.BoardOfEducation;I.printViewLink="http://maps.clarkcountynv.gov/gismo/apps/openweb_js/app/print/form.html?@".trim()+r.trim()+a.trim()+s.trim()+t.trim()+o.trim()+i.trim()+n.trim()+c.trim()+l.trim()+p.trim()+y.trim()+"&CensusTract=Not_Available".trim()+m.trim()+g.trim()+v.trim()+S.trim()+"&CommDist=Not_Available".trim()+d.trim()+L.trim()+u.trim()+h.trim()+f.trim()+w.trim()+A.trim()+"&MCD=Not_Available".trim(),$("#printFriendlyLink").attr("href",I.printViewLink),console.log("C [[ resolved print map URL: "+e+" ]]"),console.log("C [[ resolved print final URL: "+I.printViewLink+" ]]")},I.toggleHiddenState=function(e){!0===hiddenState?($(".hideShowBar").removeClass("hideShowBarCollapsed"),$(".hideShowBlurb").removeClass("hideShowBlurbCollapsed"),$(".hideShowBlurb").empty().append('<i class="ion-chevron-up" style="margin-left:20px;">&nbsp;&nbsp;</i> &nbsp; Hide'),$(".omnibarcontainer").removeClass("omnibarcontainerCollapsed"),console.log("EXPAND OUT"),hiddenState=!1):($(".hideShowBar").addClass("hideShowBarCollapsed"),$(".hideShowBlurb").addClass("hideShowBlurbCollapsed"),$(".hideShowBlurb").empty().append('<i class="ion-chevron-down" style="margin-left:20px;">&nbsp;&nbsp;</i> &nbsp; See Property Information'),$(".omnibarcontainer").addClass("omnibarcontainerCollapsed"),hiddenState=!0,console.log("HIDE IN "+hiddenState))},I.skinnyDisplayOptions=[{id:"1",name:"Right-of-Way",icon:"ion-android-car",active:!1},{id:"2",name:"Tools",icon:"ion-settings",active:!1},{id:"4",name:"Legend",icon:"ion-android-list",active:!1},{id:"6",name:"Share or embed",icon:"ion-link",active:!1},{id:"7",name:"Print",icon:"ion-printer",active:!1}],I.selectDisplayItem=function(e,r,a){I.activeClass=e,I.activeName=r,console.log(e),"Right-of-Way"===I.activeName&&map.addLayer(rightofwayLayer),"Tools"===I.activeName?(map.removeLayer(rightofwayLayer),I.theTool=!0,I.theLegend=!1,I.theWeather=!1,I.theValuation=!1,console.log("tool")):"Valuation"===I.activeName?(map.removeLayer(rightofwayLayer),I.theTool=!1,I.theLegend=!1,I.theWeather=!1,I.theValuation=!0):"Legend"===I.activeName?(map.removeLayer(rightofwayLayer),I.theTool=!1,I.theLegend=!0,I.theWeather=!1,I.theValuation=!1):"Weather"===I.activeName?(map.removeLayer(rightofwayLayer),I.theTool=!1,I.theLegend=!1,I.theWeather=!0,I.theValuation=!1):"Share or embed"===I.activeName?$("#shareModal").modal("show"):"Print"===I.activeName&&(!0===searchHasCompleted?(externalPrint(),console.log("HAS A SEARCH ALREADY BEEN COMPLETED?: "+searchHasCompleted)):alert("You must first complete a search before printing a map.")),panelCloseHit=!1,console.log("skinny panel going back"),$(".inactiveOverlay").removeClass("inactiveOverlayVisible"),$(".skinnyPanel").animate({marginLeft:"-=240px"},0),skinnyPanelOpen=!1,console.log("skinnyPanelOpen "+skinnyPanelOpen),console.log("you clicked for "+I.activeName)},I.propInfoVisNew=function(e){"none"==$("#tester .dropdown-menu").css("display")?autocompleteIsShowing=!1:autocompleteIsShowing=!0,console.log("THIS IS THE STATE OF THE AUTOCOMPLETE: "+autocompleteIsShowing),console.log("THIS IS THE NUMERAL PASSED: "+e),console.log("HAS THE SEARCH COMPLETED?: "+searchHasCompleted),0===e?!0===autocompleteIsShowing&&!1===searchHasCompleted?($(".accordionStyleNew").css({display:"none"}),console.log("C [[ propInfoVis-a[0]"+JSON.stringify($(".accordionStyleNew").position())+" ]]")):!0===autocompleteIsShowing&&!0===searchHasCompleted?($(".accordionStyleNew").css({display:"block"}),console.log("C [[ propInfoVis-a[1]"+JSON.stringify($("#PropInfoDialog").position())+" ]]")):!1===autocompleteIsShowing&&!1===autocompleteDirty&&!1===searchHasCompleted&&$("#tester input").val().length<3||(!1===autocompleteIsShowing&&!1===autocompleteDirty&&!0===searchHasCompleted&&$("#tester input").val().length<3?console.log("its hitting me first"):!1===autocompleteIsShowing&&!1===autocompleteDirty&&!1===searchHasCompleted&&2<$("#tester input").val().length?console.log("its hitting me"):!1===autocompleteIsShowing&&!0===autocompleteDirty&&!0===searchHasCompleted&&$("#tester input").val().length<3?($(".accordionStyleNew").css({display:"none"}),console.log("C [[ propInfoVis-a[0]"+JSON.stringify($(".accordionStyleNew").position())+" ]]"),console.log("its hitting me2")):!1===autocompleteIsShowing&&!0===autocompleteDirty&&!0===searchHasCompleted&&3===$("#tester input").val().length?($(".accordionStyleNew").css({display:"none"}),console.log("C [[ propInfoVis-a[0]"+JSON.stringify($(".accordionStyleNew").position())+" ]]"),console.log("its hitting me3")):!1===autocompleteIsShowing&&!0===autocompleteDirty&&!0===searchHasCompleted&&2<$("#tester input").val().length||console.log("its hitting unhandled")):2===e?($(".accordionStyleNew").css({display:"none"}),console.log("C [[ propInfoVis-a[0]"+JSON.stringify($(".accordionStyleNew").position())+" ]]"),console.log("x close clicked, received in prop info vis new")):(autocompleteDirty,$(".accordionStyleNew").css({display:"block"}),console.log("C [[ propInfoVis-a[0]"+JSON.stringify($(".accordionStyleNew").position())+" ]]"))}}]),open.controller("accordionCtrl",["$scope","$http","openFactory",function(r,e,a){r.oneAtATime=!1,r.items=["Item 1","Item 2","Item 3"],r.addItem=function(){var e=r.items.length+1;r.items.push("Item "+e)},r.status={open0:!0,open0D:!1}}]),open.filter("trustAsResourceUrl",["$sce",function(r){return function(e){return r.trustAsResourceUrl(e)}}]);